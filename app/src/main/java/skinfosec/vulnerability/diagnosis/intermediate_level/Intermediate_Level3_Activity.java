package skinfosec.vulnerability.diagnosis.intermediate_level;

import android.app.Activity;
import android.content.Intent;
import android.os.Bundle;
import android.os.Environment;
import android.util.Log;

import android.widget.TextView;
import android.widget.Toast;

import java.io.File;
import java.util.Calendar;


public class Intermediate_Level3_Activity extends Activity {

    private static final String TAG = "junshsae_log";
    private static final int REQUEST_CODE = 1234;

    @Override
    protected void onCreate( Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_intermediate_level_3);
        Log.d(TAG,"junshae oncreate end");
    }

    @Override
    protected void onStart() {
        super.onStart();
        Intent intent = getIntent();
        String key = intent.getStringExtra("key");

        Log.d(TAG,"junshae key : "+ Key());
        if(intent.getAction().equals("com.aaaa.bbbb.intent.ANSWER") && key.equals(Key())){

            String path = getFilesDir().getAbsolutePath();
            File getDirectory = Environment.getExternalStorageDirectory();

            TextView textview = (TextView)findViewById(R.id.set_answer);
            textview.setText("개발자 모드로 진입했습니다. \n\n\n"
                    + "내부 저장소 경로 : " + path.toString() + "\n"
                    + "외부 저장소 경로 : " + getDirectory.toString() + "\n"
                    + "component call key value : " +  Key()+ "\n"
            );

        }else{
            Toast toast = Toast.makeText(getApplicationContext(), "호출 인자가 잘못 되었습니다.", Toast.LENGTH_SHORT);
            toast.show();
            android.os.Process.killProcess(android.os.Process.myPid());
            Log.d(TAG,"junshae finish call");
        }
        Log.d(TAG,"junshae onstart end");
    }


    private String Key (){
        Calendar cal = Calendar.getInstance();
        String  Key = "key";
        int day = cal.get(Calendar.DAY_OF_WEEK);

        switch (day){
            case 1:
                Key = "sunday";
                break;
            case 2:
                Key = "monday";
                break;
            case 3:
                Key = "tuesday";
                break;
            case 4:
                Key = "wednesday";
                break;
            case 5:
                Key = "thursday";
                break;
            case 6:
                Key = "friday";
                break;
            case 7:
                Key = "saturday";
                break;
            default:
                Key = null;
                break;
        }
        return Key;
    }

}